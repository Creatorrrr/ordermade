<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="ordermade.store.mapper.PortfolioMapper">
  
  	<insert id="insertPortfolio">
  		<selectKey resultType="int" keyProperty="id" order="BEFORE">
  			select portfolio_seq.nextval from dual
  		</selectKey>
  		insert into portfolio(id, title, type, content, maker_id, image) 
  		values(#{id}, #{title}, #{category.type} , #{content}, #{maker.id}, #{image})
  	</insert>
  
  	<update id="updatePortfolioById">
  		update portfolio set title=#{title}, type=#{category.type}, content=#{content}, maker_id=#{maker.id}, image={image} where id=#{id}
  	</update>
  
  
  	<delete id="deletePortfolioById">
  		delete from portfolio where id=#{id}
  	</delete>
  
  	<select id="selectPortfolioById" resultMap="portfolioMap">
  		select id, title, type, content, maker_id, image from portfolio where id=#{id}
  	</select>
  
  	<select id="selectPortfoliosByMakerId" resultMap="portfolioMap">
  	 select * from (select t.*, row_number() over (order by t.OBJECT_ID) as limitNum from portfolio t) 
  	 where maker_id=#{maker.id} and limitNum between 0 and 10
  	</select>
  
  
  
  </mapper>
  
  
  